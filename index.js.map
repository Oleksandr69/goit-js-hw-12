{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function galleryClear() {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = '';\n}\n\nexport function galleryMaker(imageArr) {\n  return imageArr.map(elem => itemMaker(elem)).join('');\n}\n\nfunction itemMaker(foto) {\n  const {\n    largeImageURL,\n    webformatURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = foto;\n  return `<li class=\"gallery-item\">\n\t            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n\t\t            <img \n\t\t\t          class=\"gallery-image\" \n\t\t\t          src=\"${webformatURL}\" \n\t\t\t          alt=\"${tags}\" \n\t\t\t        />\n\t            \n              <div class=\"gallery-dl\">\n                <div>\n                  <p class=\"gallery-info\">Likes</p>\n                  <p class=\"gallery-value\">${likes}</p>\n                </div>\n                <div>\n                  <p class=\"gallery-info\">Views</p>\n                  <p class=\"gallery-value\">${views}</p>\n                </div>\n                <div>\n                  <p class=\"gallery-info\">Comments</p>\n                  <p class=\"gallery-value\">${comments}</p>\n                </div>\n                <div>\n                  <p class=\"gallery-info\">Downloads</p>\n                  <p class=\"gallery-value\">${downloads}</p>\n                </div>\n              </div>\n              </a>  \n        </li>`;\n}\n\nexport function messageAllert(message, text, backColor) {\n  iziToast.show({\n    position: 'topRight',\n    title: message,\n    titleColor: 'white',\n    message: text,\n    messageSize: '24px',\n    messageLineHeight: '24px',\n    messageColor: 'white',\n    backgroundColor: backColor,\n    theme: 'dark',\n  });\n}\n","import axios from 'axios';\n// import { messageAllert } from './render-functions';\n\nconst API_KEY = '48882372-89a0cb49e548afa674928e493';\n\nexport async function getAllFoto(value, perPage, page) {\n  const searchParams = new URLSearchParams({\n    key: API_KEY,\n    q: value,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: perPage,\n    page: page,\n    language: 'en',\n  });\n\n  const result = await axios.get(`https://pixabay.com/api/?${searchParams}`);\n  return result.data;\n}\n// export function getFoto(id) {\n//   return axiosFotoSearch.get(`/fotos/${id}`).then(res => res.data);\n// }\n// export function createFoto(foto) {\n//   return axiosFotoSearch.post('/fotos', foto).then(res => res.data);\n// }\n// export function updeteFoto(id, foto) {\n//   return axiosFotoSearch.patch(`/fotos/${id}`, foto).then(res => res.data);\n// }\n// export function resetFoto(id, foto) {\n//   return axiosFotoSearch.put(`/fotos/${id}`, foto).then(res => res.data);\n// }\n// export function deleteFoto(id) {\n//   return axiosFotoSearch.delete(`/fotos/${id}`).then(res => res.data);\n// }\n","import { galleryMaker } from './js/render-functions';\nimport { getAllFoto } from './js/pixabay-api';\nimport { messageAllert } from './js/render-functions';\nimport { galleryClear } from './js/render-functions';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst formSearchFotos = document.querySelector('.feedback-form');\nconst loadMessage = document.querySelector('.message');\nconst btnLoadMore = document.querySelector('.btn-load-more');\nconst gallery = document.querySelector('.gallery');\n\nconst params = {\n  searchValue: '',\n  page: 1,\n  perPage: 40,\n  pageMax: 1,\n};\n\nformSearchFotos.addEventListener('submit', fotosSearch);\n\nbtnLoadMore.addEventListener('click', async () => {\n  params.page += 1;\n  hideBtnLoadMore();\n  loadMessage.innerHTML = '<span class=\"loader\"></span>';\n  const res = await getAllFoto(params.searchValue, params.perPage, params.page);\n\n  gallery.insertAdjacentHTML('beforeend', galleryMaker(res.hits));\n  const galleryBox = new SimpleLightbox('.gallery-link', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n    captionPosition: 'bottom',\n  });\n  galleryBox.refresh();\n  checkLoadStatus();\n  loadMessage.innerHTML = '';\n  // console.log(gallery.firstChild.getBoundingClientRect());\n  const height = gallery.firstChild.getBoundingClientRect();\n  scrollBy({\n    top: height.height * 2,\n    behavior: 'smooth',\n  });\n});\n\nasync function fotosSearch(evt) {\n  try {\n    evt.preventDefault();\n\n    galleryClear();\n    params.searchValue = evt.target.searchImages.value.trim();\n    params.page = 1;\n\n    if (!params.searchValue) {\n      hideBtnLoadMore();\n      messageAllert('', 'Enter a search term!', 'rgb(9, 206, 42)');\n    } else {\n      loadMessage.innerHTML = '<span class=\"loader\"></span>';\n      const res = await getAllFoto(\n        params.searchValue,\n        params.perPage,\n        params.page\n      );\n      params.pageMax = Math.ceil(res.total / params.perPage);\n      if (res.hits.length !== 0) {\n        gallery.innerHTML = galleryMaker(res.hits);\n        const galleryBox = new SimpleLightbox('.gallery-link', {\n          captions: true,\n          captionsData: 'alt',\n          captionDelay: 250,\n          captionPosition: 'bottom',\n        });\n        galleryBox.refresh();\n\n        checkLoadStatus();\n      } else {\n        hideBtnLoadMore();\n        messageAllert(\n          '',\n          'Sorry, there are no images matching your search query. Please try again!',\n          'rgb(9, 206, 42)'\n        );\n      }\n      loadMessage.innerHTML = '';\n    }\n    formSearchFotos.reset();\n  } catch (error) {\n    formSearchFotos.reset();\n    galleryClear();\n    loadMessage.innerHTML = '';\n    messageAllert('ERROR', `Sorry, ${error}!`, ' #ef4040');\n  }\n}\n\nfunction showBtnLoadMore() {\n  btnLoadMore.classList.remove('is-hidden');\n}\n\nfunction hideBtnLoadMore() {\n  btnLoadMore.classList.add('is-hidden');\n}\n\nfunction checkLoadStatus() {\n  if (params.page >= params.pageMax) {\n    hideBtnLoadMore();\n    messageAllert(\n      '',\n      \"We're sorry, but you've reached the end of search results.\",\n      'rgb(9, 206, 42)'\n    );\n  } else {\n    showBtnLoadMore();\n  }\n\n  // if (res.hits.length < params.perPage) {\n  //   hideBtnLoadMore();\n  // } else {\n  //   showBtnLoadMore();\n  // }\n}\n"],"names":["galleryClear","gallery","galleryMaker","imageArr","elem","itemMaker","foto","largeImageURL","webformatURL","tags","likes","views","comments","downloads","messageAllert","message","text","backColor","iziToast","API_KEY","getAllFoto","value","perPage","page","searchParams","axios","formSearchFotos","loadMessage","btnLoadMore","params","fotosSearch","hideBtnLoadMore","res","SimpleLightbox","checkLoadStatus","height","evt","error","showBtnLoadMore"],"mappings":"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"}